{"ast":null,"code":"import * as d3 from 'd3';\nconst parseTime = d3.timeParse('%d/%m/%y');\nlet chart = {},\n    x,\n    y,\n    line,\n    width,\n    height,\n    g;\n\nchart.create = (el, props, state) => {\n  const margin = {\n    top: 20,\n    right: 20,\n    bottom: 30,\n    left: 50\n  };\n  let svg = d3.select(el).append('svg').attr('class', 'chart').attr('width', props.width).attr('height', props.height);\n  width = svg.attr('width') - margin.left - margin.right;\n  height = svg.attr('height') - margin.top - margin.bottom;\n  g = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n  x = d3.scaleTime().rangeRound([0, width]);\n  y = d3.scaleLinear().rangeRound([height, 0]);\n  line = d3.line().x(function (d) {\n    return x(d.Date);\n  }).y(function (d) {\n    return y(d.Close);\n  });\n  chart.update(state);\n};\n\nchart.update = state => {\n  let svg = d3.select('svg');\n  chart.draw(svg, state.data, state.title);\n};\n\nchart.draw = function (svg, data, title) {\n  this.cleanUp();\n  data.forEach(function (d) {\n    d.Date = parseTime(d.Date);\n    d.Close = +d.Close;\n    return d;\n  });\n  x.domain(d3.extent(data, function (d) {\n    return d.Date;\n  }));\n  y.domain([0, d3.max(data, function (d) {\n    return d.Close;\n  })]);\n  g.append('g').attr('class', 'x-axis').attr('transform', 'translate(0,' + height + ')').call(d3.axisBottom(x).ticks(d3.timeMonth.every(3)));\n  g.append('g').attr('class', 'y-axis').call(d3.axisLeft(y)).append('text').attr('fill', '#000').attr('transform', 'rotate(-90)').attr('y', 6).attr('dy', '0.71em').attr('text-anchor', 'end').text('Price ($)');\n  g.append('path').attr('class', 'chart-line').datum(data).attr('fill', 'none').attr('stroke', 'steelblue').attr('stroke-linejoin', 'round').attr('stroke-linecap', 'round').attr('stroke-width', 1.5).attr('d', line);\n  g.append('text').attr('class', 'chart-title').attr('x', width / 2).attr('y', 0).attr('text-anchor', 'middle').style('font-size', '16px').text(title);\n};\n\nchart.cleanUp = function (el) {\n  d3.selectAll('.x-axis').remove();\n  d3.selectAll('.y-axis').remove();\n  d3.selectAll('.chart-title').remove();\n  d3.selectAll('.chart-line').remove();\n};\n\nexport default chart;","map":{"version":3,"sources":["/Users/yin/Desktop/2020Fall-bc/react-charts-and-maps/src/chartD3.js"],"names":["d3","parseTime","timeParse","chart","x","y","line","width","height","g","create","el","props","state","margin","top","right","bottom","left","svg","select","append","attr","scaleTime","rangeRound","scaleLinear","d","Date","Close","update","draw","data","title","cleanUp","forEach","domain","extent","max","call","axisBottom","ticks","timeMonth","every","axisLeft","text","datum","style","selectAll","remove"],"mappings":"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","sourcesContent":["\nimport * as d3 from 'd3';\n\nconst parseTime = d3.timeParse('%d/%m/%y');\n\nlet chart = {},\n\t\tx, y,\n    line,\n    width,\n    height,\n    g;\n\nchart.create = (el, props, state) => {\n\tconst margin = {top: 20, right: 20, bottom: 30, left: 50};\n\t\n\tlet svg = d3.select(el).append('svg')\n             \t.attr('class', 'chart')\n             \t.attr('width', props.width)\n             \t.attr('height', props.height);\n\n\twidth = svg.attr('width') - margin.left - margin.right;\n  height = svg.attr('height') - margin.top - margin.bottom;\n  g = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n  x = d3.scaleTime().rangeRound([0, width]);\n  y = d3.scaleLinear().rangeRound([height, 0]);\n  line = d3.line()\n      \t\t .x(function(d) { return x(d.Date); })\n           .y(function(d) { return y(d.Close); });\n\n  chart.update(state);\n}\n\nchart.update = (state) => {\n\tlet svg = d3.select('svg');\n  \n  chart.draw(svg, state.data, state.title);\n}\n\nchart.draw = function(svg, data, title) {\n\tthis.cleanUp();\n\n\tdata.forEach(function(d) {\n    d.Date = parseTime(d.Date);\n    d.Close = +d.Close;\n    return d;\n  });\n\n  x.domain(d3.extent(data, function(d) {  return d.Date; }));\n  y.domain([0, d3.max(data, function(d) { return d.Close; })]);\n\n  g.append('g')\n    .attr('class', 'x-axis')\n    .attr('transform', 'translate(0,' + height + ')')\n    .call(d3.axisBottom(x).ticks(d3.timeMonth.every(3)));\n\n  g.append('g')\n    .attr('class', 'y-axis')\n    .call(d3.axisLeft(y))\n    .append('text')\n    .attr('fill', '#000')\n    .attr('transform', 'rotate(-90)')\n    .attr('y', 6)\n    .attr('dy', '0.71em')\n    .attr('text-anchor', 'end')\n    .text('Price ($)');\n\n  g.append('path')\n    .attr('class', 'chart-line')\n  \t.datum(data)\n\t\t.attr('fill', 'none')\n\t\t.attr('stroke', 'steelblue')\n\t\t.attr('stroke-linejoin', 'round')\n\t\t.attr('stroke-linecap', 'round')\n\t\t.attr('stroke-width', 1.5)\n\t\t.attr('d', line);\n\n  g.append('text')\n\t\t.attr('class', 'chart-title')\n\t\t.attr('x', (width / 2))             \n\t\t.attr('y', 0)\n\t\t.attr('text-anchor', 'middle')  \n\t\t.style('font-size', '16px') \n\t\t.text(title);\n}\n\nchart.cleanUp = function(el) {\n  d3.selectAll('.x-axis').remove();\n\td3.selectAll('.y-axis').remove();\n  d3.selectAll('.chart-title').remove();\n  d3.selectAll('.chart-line').remove();\n};\n\nexport default chart;"]},"metadata":{},"sourceType":"module"}